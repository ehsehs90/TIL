# 1. 컴퓨터 시스템의 구조

- 프로그램이 CPU 에서 명령을 수행하려면 수행하려는 주소 영역이 메모리에 올라가 있어야 한다. 이때 프로그램의 주소 영역은 크게 **코드, 데이터, 스택 영역** 으로 구분된다
- 코드 영역은 우리가 작성한 프로그램 함수들의 코드가 기계어 명령으로 변환되어 저장되는 부분이다.
- 데이터 영역은 전역 변수 등 프로그램이 사용하는 데이터를 저장하는 부분이다
- 스택영역은 함수가 호출될 때 호출된 함수의 수행을 마치고 복귀할 주소 및 데이터를 임시로 저장하는데 사용되는 공간이다.
- 일반적으로 프로그램 내에서 발생되는 함수 호출에 필요한 복귀 주소는 각 프로그램의 주소 공간 중 스택 영역에 보관한다.
- 반면, 인터럽트 때문에  CPU를 선점당한 위치를 저장하기 위한 공간은 OS 커널 부분에 존재하게 된다.
- OS는 현재 실행중인 모든 프로그램을 관리하기 위한 자료구조를 유지하고 있다.

```python
예를 들어 A,B 두 개의 프로그램이 현재 수행중이라면 
커널 어딘가에 이 두 프로그램을 관리하기 위한 자료 구조가 존재한다. 

이 자료 구조를 "프로세스 제어 블록(PCB)"라 부른다.
```

- PCB에는 인터럽트가 발생했을 때 그 프로그램의 어느 부분까지 수행했는지를 저장하기 위한 영역이 존재한다.

```python
프로그램 A가 수행중에 인터럽트가 발생하면
현재 실행중이던 지점을 A의 프로세스 제어 블록에 저장한 후,
인터럽트 처리 루틴으로 가서 인터럽트 발생관련 일 처리를 한다.

인터럽트 처리를 모두 마치면 
프로그램 A의 프로세스 제어 블록에 저장된 주소를 복원시켜 원래 수행하던 일을 재개하게 된다.
```

